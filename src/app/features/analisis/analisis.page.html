<ion-content>
  <div class="info-paciente">
    <div class="info-item">
      <span class="info-label">Paciente:</span>
      <span class="info-valor">{{ nombrePaciente }}</span>
    </div>
    <div class="info-item">
      <span class="info-label">Estudio:</span>
      <span class="info-valor">{{ tipoEstudio }}</span>
    </div>
    <div class="info-item">
      <span class="info-label">Fecha:</span>
      <span class="info-valor">{{ fechaEstudio | date:'dd/MM/yyyy' }}</span>
    </div>
  </div>

  <!-- Contenedor de imagen DICOM -->
  <div class="dicom-container">
    <!-- Imagen de vista previa (siempre visible) -->
    <div class="preview-container" *ngIf="previewImageSrc">
      <div class="imagen-container">
        <img
          [src]="previewImageSrc"
          alt="Imagen médica"
          class="imagen-medica"
        />
      </div>

      <div class="loading-message" *ngIf="isVideoLoading && hasVideo">
        <ion-spinner name="dots"></ion-spinner>
        <p>Cargando video completo...</p>
      </div>
    </div>

    <!-- Video (visible solo cuando está cargado) -->
    <div
      class="video-container"
      *ngIf="videoSrc && !isVideoLoading && hasVideo"
    >
      <video [src]="videoSrc" controls width="100%">
        Tu navegador no soporta la reproducción de video.
      </video>
    </div>
  </div>

  <div class="botones-container">
    <ion-button
      class="boton-accion"
      expand="block"
      shape="round"
      (click)="compartir()"
    >
      <ion-icon slot="start" name="share-outline"></ion-icon>
      Compartir
    </ion-button>

    <ion-button
      class="boton-accion"
      expand="block"
      shape="round"
      (click)="descargar()"
    >
      <ion-icon slot="start" name="download-outline"></ion-icon>
      Descargar
    </ion-button>
  </div>
</ion-content>
